!function(e,t){"function"==typeof define&&define.amd?define(["backbone"],t):"object"==typeof module&&module.exports?module.exports=t(require("backbone")):e.ModelDecorator=t(e.Backbone)}(this,function(e){var t=function(t){function r(e,t,r,n,o){var i=!1,p="function"==typeof o;return"boolean"==typeof n&&n||!n?n=null:p=!0,(p||!t.hasOwnProperty(r))&&(Object.defineProperty(t,r,{get:o||function(){return e.get(r)},set:n||function(t){var n={};n[r]=t,e.set(n,e._propertyOptions[r])},enumerable:!0,configurable:!0}),i=!0),i}function n(e,t,n){if(n)for(var o in n)r(e,t,o)}function o(e,t,n,o){return r(this,this.properties,e,n,o)||1!==arguments.length?(t=t||{},this._propertyOptions[e]=t):t=this._propertyOptions[e],t}function i(e){e=e||this.attributes;var t=u(this,this.properties);n(this,t,e)}function p(e){var t=u(e,this);n(e,t,e._propertyOptions),n(e,t,e.defaults)}function u(e,r){var n;switch(t){case a:n=e;break;case s:default:n=r}return n}var a="model",s="facade";return e.Model.extend({initialize:function(){Object.defineProperty(this,"_propertyOptions",{value:this._propertyOptions||{},writable:!1,enumerable:!1,configurable:!1}),Object.defineProperty(this,"properties",{value:new p(this),writable:!1,enumerable:!1,configurable:!1})},properties:null,property:o,validateProperties:i,_propertyOptions:{}})}(null);return t});